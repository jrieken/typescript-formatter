{"version":3,"file":"base.js","sourceRoot":"","sources":["base.ts"],"names":[],"mappings":"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","sourcesContent":["import * as ts from \"typescript\";\n\nimport * as path from \"path\";\nimport * as fs from \"fs\";\n\nimport { Options } from \"../\";\nimport { getConfigFileName, parseJSON } from \"../utils\";\n\ninterface TsfmtSettings {\n    insertSpaceAfterCommaDelimiter?: boolean;\n    insertSpaceAfterSemicolonInForStatements?: boolean;\n    insertSpaceBeforeAndAfterBinaryOperators?: boolean;\n    insertSpaceAfterConstructor?: boolean;\n    insertSpaceAfterKeywordsInControlFlowStatements?: boolean;\n    insertSpaceAfterFunctionKeywordForAnonymousFunctions?: boolean;\n    insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis?: boolean;\n    insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets?: boolean;\n    insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces?: boolean;\n    insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces?: boolean;\n    insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces?: boolean;\n    insertSpaceAfterTypeAssertion?: boolean;\n    insertSpaceBeforeFunctionParenthesis?: boolean;\n    placeOpenBraceOnNewLineForFunctions?: boolean;\n    placeOpenBraceOnNewLineForControlBlocks?: boolean;\n    insertSpaceBeforeTypeAnnotation?: boolean;\n    baseIndentSize?: number;\n    indentSize?: number;\n    // 0, 1, 2 or None, Block, Smart\n    indentStyle?: number | string;\n    tabSize?: number;\n    newLineCharacter?: string;\n    convertTabsToSpaces?: boolean;\n}\n\nexport function makeFormatCodeOptions(fileName: string, opts: Options, formatSettings: Mutable<ts.FormatCodeSettings>): ts.FormatCodeSettings {\n    let baseDir = opts.baseDir ? path.resolve(opts.baseDir) : path.dirname(path.resolve(fileName));\n    let configFileName: string | null;\n    if (opts.tsfmtFile && path.isAbsolute(opts.tsfmtFile)) {\n        configFileName = opts.tsfmtFile;\n    } else {\n        configFileName = getConfigFileName(baseDir, opts.tsfmtFile || \"tsfmt.json\");\n    }\n    if (!configFileName) {\n        return formatSettings;\n    }\n\n    if (opts.verbose) {\n        console.log(`read ${configFileName} for ${fileName}`);\n    }\n\n    let config: TsfmtSettings = parseJSON(fs.readFileSync(configFileName, \"utf-8\"));\n    if (typeof config.insertSpaceAfterCommaDelimiter === \"boolean\") {\n        formatSettings.insertSpaceAfterCommaDelimiter = config.insertSpaceAfterCommaDelimiter;\n    }\n    if (typeof config.insertSpaceAfterSemicolonInForStatements === \"boolean\") {\n        formatSettings.insertSpaceAfterSemicolonInForStatements = config.insertSpaceAfterSemicolonInForStatements;\n    }\n    if (typeof config.insertSpaceBeforeAndAfterBinaryOperators === \"boolean\") {\n        formatSettings.insertSpaceBeforeAndAfterBinaryOperators = config.insertSpaceBeforeAndAfterBinaryOperators;\n    }\n    if (typeof config.insertSpaceAfterConstructor === \"boolean\") {\n        formatSettings.insertSpaceAfterConstructor = config.insertSpaceAfterConstructor;\n    }\n    if (typeof config.insertSpaceAfterKeywordsInControlFlowStatements === \"boolean\") {\n        formatSettings.insertSpaceAfterKeywordsInControlFlowStatements = config.insertSpaceAfterKeywordsInControlFlowStatements;\n    }\n    if (typeof config.insertSpaceAfterFunctionKeywordForAnonymousFunctions === \"boolean\") {\n        formatSettings.insertSpaceAfterFunctionKeywordForAnonymousFunctions = config.insertSpaceAfterFunctionKeywordForAnonymousFunctions;\n    }\n    if (typeof config.insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis === \"boolean\") {\n        formatSettings.insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis = config.insertSpaceAfterOpeningAndBeforeClosingNonemptyParenthesis;\n    }\n    if (typeof config.insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces === \"boolean\") {\n        formatSettings.insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces = config.insertSpaceAfterOpeningAndBeforeClosingNonemptyBraces;\n    }\n    if (typeof config.insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets === \"boolean\") {\n        formatSettings.insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets = config.insertSpaceAfterOpeningAndBeforeClosingNonemptyBrackets;\n    }\n    if (typeof config.insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces === \"boolean\") {\n        formatSettings.insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces = config.insertSpaceAfterOpeningAndBeforeClosingTemplateStringBraces;\n    }\n    if (typeof config.insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces === \"boolean\") {\n        formatSettings.insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces = config.insertSpaceAfterOpeningAndBeforeClosingJsxExpressionBraces;\n    }\n    if (typeof config.insertSpaceAfterTypeAssertion === \"boolean\") {\n        formatSettings.insertSpaceAfterTypeAssertion = config.insertSpaceAfterTypeAssertion;\n    }\n    if (typeof config.insertSpaceBeforeFunctionParenthesis === \"boolean\") {\n        formatSettings.insertSpaceBeforeFunctionParenthesis = config.insertSpaceBeforeFunctionParenthesis;\n    }\n    if (typeof config.placeOpenBraceOnNewLineForFunctions === \"boolean\") {\n        formatSettings.placeOpenBraceOnNewLineForFunctions = config.placeOpenBraceOnNewLineForFunctions;\n    }\n    if (typeof config.placeOpenBraceOnNewLineForControlBlocks === \"boolean\") {\n        formatSettings.placeOpenBraceOnNewLineForControlBlocks = config.placeOpenBraceOnNewLineForControlBlocks;\n    }\n    if (typeof config.insertSpaceBeforeTypeAnnotation === \"boolean\") {\n        formatSettings.insertSpaceBeforeTypeAnnotation = config.insertSpaceBeforeTypeAnnotation;\n    }\n    if (typeof config.baseIndentSize === \"number\") {\n        formatSettings.baseIndentSize = config.baseIndentSize;\n    }\n    if (typeof config.indentSize === \"number\") {\n        formatSettings.indentSize = config.indentSize;\n    }\n    if (typeof config.indentStyle === \"number\") {\n        formatSettings.indentStyle = config.indentStyle as number;\n    } else if (typeof config.indentStyle === \"string\") {\n        formatSettings.indentStyle = (ts.IndentStyle as any)[config.indentStyle] as number;\n    }\n    if (typeof config.tabSize === \"number\") {\n        formatSettings.tabSize = config.tabSize;\n    }\n    if (typeof config.newLineCharacter === \"string\") {\n        formatSettings.newLineCharacter = config.newLineCharacter;\n    }\n    if (typeof config.convertTabsToSpaces === \"boolean\") {\n        formatSettings.convertTabsToSpaces = config.convertTabsToSpaces;\n    }\n\n    return formatSettings;\n}\nexport type Mutable<T> = {\n    -readonly [P in keyof T]: T[P];\n};\n"]}